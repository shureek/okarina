## Инструкции по работе с репозиторием

### Генерация SVG аппликатур

1. **Скрипт**: `generate_notes.py`
2. **Назначение**: генерирует все SVG-изображения нот (включая диезы и бемоли) и сохраняет их в папку `notes/`.
3. **Запуск**:
   ```bash
   python generate_notes.py
   ```
4. **Результат**: в `notes/` появятся файлы вида `do.svg`, `sol+.svg`, `2re-.svg` и т.д. Каждый файл содержит рисунок аппликатуры с подписью ноты.

> Скрипт автоматически перезаписывает файлы. Запускайте его, если нужно обновить дизайн или добавить новые ноты.

---

### Замена нот в Markdown на SVG

1. **Скрипт**: `replace_notes.py`
2. **Назначение**: находит в указанном `.md` файле названия нот (русские, латинские, буквенные) и заменяет их на `![…](notes/…svg)` для готовых аппликатур.
3. **Пример запуска**:
   ```bash
   python replace_notes.py balu-song.md
   ```
4. **Поддерживаемые обозначения**:
   - `до ре ми фа соль ля си`, `do re mi fa sol la si`
   - буквы `A B C D E F G H` (где `B` трактуется как `си♭`)
   - диезы/бемоли: `#`, `+`, `♯`, `b`, `-`, `♭`
   - верхняя октава: `2до`, `до2`, `2do`, `do2`, и т.п.
   - между нотами допускаются пробелы, переносы строк, знаки препинания.

> Скрипт изменяет файл на месте. Сделайте резервную копию, если нужно сохранить исходник.

---

### Публикация сайта на GitHub Pages

1. **Workflow**: `.github/workflows/pages.yml`
2. **Функции**:
   - копирует все `.md` → `.html` (Pandoc)
   - подключает `styles/site.css`
   - дополнительно публикует кастомный `all-notes.html`
3. **Запуск**: автоматически при `git push` в ветку `master`. Можно запустить вручную в GitHub Actions (workflow `Build and Deploy Pages`).
4. **Результат**: сайт доступен по адресу `https://<username>.github.io/okarina/`.

---

### Юнит-тесты

1. **Файл тестов**: `tests/test_replace_notes.py`
2. **Назначение**: интеграционно проверяет CLI `replace_notes.py` на нескольких наборах данных (русские ноты, верхняя октава, буквы, пунктуация).
3. **Запуск всех тестов**:
   ```bash
   python -m unittest tests/test_replace_notes.py
   ```
4. **Что проверяется**:
   - простые ноты (`до ре ми`)
   - смешанные обозначения и верхняя октава (`A B C# do2 re2 2ми`)
   - ноты с пунктуацией и бемолями (`ля.\nреb, 2до ре2`)

> Перед пушем рекомендуется запускать тесты, чтобы убедиться, что замена нот работает корректно.

---

### Полезные советы

- После правок в Markdown:
  1. Запустите `python replace_notes.py <файл>` для преобразования нот.
  2. Проверьте результат (наблюдайте, чтобы между нотами оставались пробелы/пунктуация).
  3. При необходимости сгенерируйте SVG (`python generate_notes.py`), если добавили новые аппликатуры.
  4. Запустите тесты `python -m unittest tests/test_replace_notes.py`.
  5. Сделайте `git push` — Pages обновится автоматически.

- Если нужно добавить новую мелодию:
  1. Создайте `.md` файл по образцу существующих (каждая строка текста + соответствующие ноты).
  2. После заполнения нот в текстовом виде прогоните `replace_notes.py`.
  3. Добавьте ссылку на файл в `readme.md`.
  4. Пушите изменения.


